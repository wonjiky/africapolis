{"version":3,"file":"d3plus-export.js","sources":["../src/svgPresets.js","../src/dom2canvas.js","../src/saveElement.js"],"sourcesContent":["/**\n    @function svgPresets\n    @desc Adds SVG default attributes to a d3 selection in order to redner it properly.\n    @param {Selection} selection\n*/\nexport default function(selection) {\n\n  // sets \"stroke-width\" attribute to `0` if not defined\n  const strokeWidth = selection.attr(\"stroke-width\");\n  selection.attr(\"stroke-width\", !strokeWidth ? 0 : strokeWidth);\n\n  // sets \"fill-opacity\" attribute to `0` if fill is \"transparent\" or \"none\"\n  const transparent = [\"none\", \"transparent\"].includes(selection.attr(\"fill\"));\n  const fillOpacity = selection.attr(\"fill-opacity\");\n  selection.attr(\"fill-opacity\", transparent ? 0 : fillOpacity);\n\n}\n","import html2canvas from \"html2canvas\";\nimport canvg from \"canvg-browser\";\nimport {select, selectAll} from \"d3-selection\";\n\nimport svgPresets from \"./svgPresets\";\n\nconst defaultOptions = {\n  background: false,\n  callback: () => {},\n  exclude: [],\n  padding: 0,\n  scale: 1\n};\n\nconst canvgOptions = {\n  ignoreMouse: true,\n  ignoreAnimation: true,\n  ignoreDimensions: true,\n  ignoreClear: true\n};\n\n/**\n    @function parseTransform\n    @desc Extracts scale, x, and y position from an elements \"transform\" attribute, respecting cross-browser render differences.\n    @param {HTMLElement} elem The element to be analyzed.\n    @private\n*/\nfunction parseTransform(elem) {\n\n  const property = select(elem).attr(\"transform\");\n  let scale = 1, x = 0, y = 0;\n  if (property) {\n    scale = property.match(/scale\\(([^a-z]+)\\)/i);\n    if (scale) scale = parseFloat(scale[1]);\n    else scale = 1;\n    const translate = property.match(/translate\\(([^a-z]+)\\)/i);\n    if (translate) {\n      [x, y] = translate[1]\n        .replace(\", \", \",\")\n        .replace(/([^a-z]),*\\s([^a-z])/gi, \"$1,$2\")\n        .split(\",\")\n        .map(d => parseFloat(d) * scale);\n    }\n  }\n  return [scale, x, y];\n\n}\n\n/**\n    @function dom2canvas\n    @desc Renders HTML/SVG elements to a shared canvas.\n    @param {HTMLElement|Object|Array} elem The element or array of elements to be rendered to a single canvas. Additionally, a complex object can be passed as an element which can contain specific other properties.\n    @param {Number} [elem.x] The x offset of the element within the rendered canvas.\n    @param {Number} [elem.y] The y offset of the element within the rendered canvas.\n    @param {Object} [options] Additional options to specify.\n    @param {String} [options.background] Background color of the rendered canvas.\n    @param {Function} [options.callback] Callback function to be passed the canvas element after rendering.\n    @param {Array} [options.excludes] An array of HTMLElement objects to be excluded from the render.\n    @param {Number} [options.height] Pixel height for the final output. If a height value has not been passed, it will be inferred from the sizing of the first DOM element passed.\n    @param {Number} [options.padding = 0] Outer padding for the final file.\n    @param {Number} [options.scale = 1] Scale for the final file.\n    @param {Number} [options.width] Pixel width for the final output. If a width value has not been passed, it will be inferred from the sizing of the first DOM element passed.\n*/\nexport default function(elem, options) {\n\n  if (!elem) return;\n  if (!(elem instanceof Array)) elem = [elem];\n\n  options = Object.assign({}, defaultOptions, options);\n  const IE = new RegExp(/(MSIE|Trident\\/|Edge\\/)/i).test(navigator.userAgent);\n  const ratio = window ? window.devicePixelRatio || 1 : 1;\n\n  let reference = elem[0];\n  if (reference.constructor === Object) reference = reference.element;\n\n  const height = options.height || parseFloat(select(reference).style(\"height\")),\n        width = options.width || parseFloat(select(reference).style(\"width\"));\n\n  let layerX, layerY, offsetX = 0, offsetY = 0;\n  if (reference.getBoundingClientRect) {\n    const bounds = reference.getBoundingClientRect();\n    offsetX = bounds.left;\n    offsetY = bounds.top;\n  }\n  else {\n    offsetX = reference.offsetLeft;\n    offsetY = reference.offsetTop;\n  }\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = (width + options.padding * 2) * options.scale * ratio;\n  canvas.height = (height + options.padding * 2) * options.scale * ratio;\n  canvas.style.width = (width + options.padding * 2) * options.scale;\n  canvas.style.height = (height + options.padding * 2) * options.scale;\n\n  const context = canvas.getContext(\"2d\");\n  context.scale(options.scale * ratio, options.scale * ratio);\n  context.clearRect(0, 0, canvas.width / ratio, canvas.height / ratio);\n\n  if (options.background) {\n    context.beginPath();\n    context.rect(0, 0, canvas.width / ratio, canvas.height / ratio);\n    context.fillStyle = options.background;\n    context.fill();\n  }\n\n  const layers = [];\n\n  function checkRender(trans) {\n\n    const tag = (this.tagName || \"\").toLowerCase();\n    if (options.exclude.includes(this) || tag === \"foreignobject\") return;\n\n    const transform = Object.assign({}, trans);\n\n    // strips translate and scale from transform property\n    if (this.tagName) {\n\n      const opacity = select(this).attr(\"opacity\") || select(this).style(\"opacity\");\n      const display = select(this).style(\"display\");\n      const visibility = select(this).style(\"visibility\");\n      if (display === \"none\" || visibility === \"hidden\" || opacity && parseFloat(opacity) === 0) return;\n\n      const tag = this.tagName.toLowerCase();\n      const [scale, x, y] = parseTransform(this);\n\n      if (tag === \"g\") {\n        transform.scale *= scale;\n        transform.x += x;\n        transform.y += y;\n      }\n\n      if (tag === \"svg\") {\n        const rect = this.getBoundingClientRect();\n        transform.x += rect.left - offsetX;\n        transform.y += rect.top - offsetY;\n\n        let x = select(this).attr(\"x\");\n        x = x ? parseFloat(x) * transform.scale : 0;\n        transform.x += x;\n        let y = select(this).attr(\"y\");\n        y = y ? parseFloat(y) * transform.scale : 0;\n        transform.y += y;\n        transform.clip = {\n          height: parseFloat(select(this).attr(\"height\") || select(this).style(\"height\")),\n          width: parseFloat(select(this).attr(\"width\") || select(this).style(\"width\")),\n          x, y\n        };\n      }\n      else {\n        const x = select(this).attr(\"x\");\n        if (x) transform.x += parseFloat(x) * transform.scale;\n        const y = select(this).attr(\"y\");\n        if (y) transform.y += parseFloat(y) * transform.scale;\n      }\n\n    }\n\n    if (!tag.length) {\n      const test = (this.wholeText || \"\").replace(/\\s/g, \"\");\n      if (test.length) {\n\n        const text = this.nodeValue\n          .replace(/^\\s*/, \"\")\n          .replace(/^\\n/, \"\")\n          .replace(/^\\s*/, \"\")\n          .replace(/\\n$/, \"\")\n          .replace(/\\s*$/, \"\")\n          .replace(/\\n$/, \"\");\n\n        layers.push({type: \"text\", style: this.parentNode, value: text, x: transform.x, y: transform.y});\n\n      }\n    }\n    else if (tag === \"defs\") return;\n    else if (tag === \"text\") {\n      const elem = this.cloneNode(true);\n      select(elem).call(svgPresets);\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem}));\n    }\n    else if ([\"image\", \"img\"].includes(tag)) {\n\n      const url = select(this).attr(\"href\") || select(this).attr(\"xlink:href\");\n\n      if (url.length) {\n\n        const h = parseFloat(select(this).attr(\"height\")) * transform.scale,\n              w = parseFloat(select(this).attr(\"width\")) * transform.scale;\n\n        const data = {\n          clip: transform.clip,\n          height: h,\n          loaded: false,\n          type: \"img\",\n          width: w,\n          x: transform.x,\n          y: transform.y\n        };\n        layers.push(data);\n\n        const img = new Image();\n        img.crossOrigin = \"Anonymous\";\n        img.onload = function() {\n\n          const canvas2 = document.createElement(\"canvas\");\n          const ctx2 = canvas2.getContext(\"2d\");\n          canvas2.height = h * ratio;\n          canvas2.width = w * ratio;\n          ctx2.drawImage(this, 0, 0, w * ratio, h * ratio);\n          const himg = document.createElement(\"img\");\n          himg.src = canvas2.toDataURL(\"image/png\");\n\n          data.value = himg;\n          data.loaded = true;\n\n        };\n        img.src = url;\n\n      }\n\n    }\n    else if ([\"div\", \"span\"].includes(tag) && !select(this).selectAll(\"svg\").size()) {\n\n      const data = {\n        height,\n        loaded: false,\n        type: \"html\",\n        width,\n        x: layerX - offsetX,\n        y: layerY - offsetY\n      };\n\n      const tempCanvas = document.createElement(\"canvas\");\n      tempCanvas.width = (width + options.padding * 2) * options.scale * ratio;\n      tempCanvas.height = (height + options.padding * 2) * options.scale * ratio;\n\n      const tempContext = tempCanvas.getContext(\"2d\");\n      tempContext.scale(options.scale * ratio, options.scale * ratio);\n\n      layers.push(data);\n      html2canvas(this, {\n        allowTaint: true,\n        canvas: tempCanvas,\n        height,\n        width\n      }).then(c => {\n        data.value = c;\n        data.loaded = true;\n      });\n\n    }\n    else if (tag !== \"svg\" && this.childNodes.length > 0 && !select(this).selectAll(\"image, img, svg\").size()) {\n\n      const elem = this.cloneNode(true);\n      select(elem).selectAll(\"*\").each(function() {\n        select(this).call(svgPresets);\n        if (select(this).attr(\"opacity\") === \"0\") this.parentNode.removeChild(this);\n      });\n\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem, tag}));\n\n    }\n    else if (this.childNodes.length > 0) {\n      checkChildren(this, transform);\n    }\n    else { // catches all SVG shapes\n\n      // console.log(this);\n\n      const elem = this.cloneNode(true);\n      select(elem).selectAll(\"*\").each(function() {\n        if (select(this).attr(\"opacity\") === \"0\") this.parentNode.removeChild(this);\n      });\n\n      if (tag === \"line\") {\n        select(elem).attr(\"x1\", parseFloat(select(elem).attr(\"x1\")) + transform.x);\n        select(elem).attr(\"x2\", parseFloat(select(elem).attr(\"x2\")) + transform.x);\n        select(elem).attr(\"y1\", parseFloat(select(elem).attr(\"y1\")) + transform.y);\n        select(elem).attr(\"y2\", parseFloat(select(elem).attr(\"y2\")) + transform.y);\n      }\n      else if (tag === \"path\") {\n        const [scale, x, y] = parseTransform(elem);\n        if (select(elem).attr(\"transform\")) select(elem).attr(\"transform\", `scale(${scale})translate(${x + transform.x},${y + transform.y})`);\n      }\n      select(elem).call(svgPresets);\n\n      const fill = select(elem).attr(\"fill\");\n      const defFill = fill && fill.indexOf(\"url\") === 0;\n      // if (defFill) select(elem).attr(\"fill-opacity\", 0);\n\n      layers.push(Object.assign({}, transform, {type: \"svg\", value: elem, tag}));\n      if (defFill) {\n        const def = select(fill.slice(4, -1)).node().cloneNode(true);\n        const defTag = (def.tagName || \"\").toLowerCase();\n        if (defTag === \"pattern\") {\n\n          const [scale, x, y] = parseTransform(elem);\n          transform.scale *= scale;\n          transform.x += x;\n          transform.y += y;\n          checkChildren(def, transform);\n\n        }\n      }\n\n    }\n\n  }\n\n  function checkChildren(e, trans) {\n    selectAll(e.childNodes).each(function() {\n      checkRender.bind(this)(trans);\n    });\n  }\n\n  for (let i = 0; i < elem.length; i++) {\n\n    let e = elem[i],\n        options = {scale: 1, x: 0, y: 0};\n\n    if (e.constructor === Object) {\n      options = Object.assign(options, e);\n      e = e.element;\n    }\n    layerX = options.x;\n    layerY = options.y;\n    checkRender.bind(e)(options);\n\n  }\n\n  function checkStatus() {\n\n    let allDone = true;\n    for (let i = 0; i < layers.length; i++) {\n      if (layers[i].loaded === false) {\n        allDone = false;\n        break;\n      }\n    }\n\n    if (allDone) finish();\n    else setTimeout(checkStatus, 500);\n\n  }\n\n  // Wait for all images to load\n  checkStatus();\n\n  function finish() {\n\n    for (let i = 0; i < layers.length; i++) {\n\n      const layer = layers[i];\n      const clip = layer.clip || {height, width, x: 0, y: 0};\n\n      switch (layer.type) {\n\n        case \"img\":\n          context.save();\n          context.beginPath();\n          context.translate(options.padding + clip.x, options.padding + clip.y);\n          context.rect(0, 0, clip.width, clip.height);\n          context.clip();\n          context.drawImage(layer.value, layer.x + clip.x, layer.y + clip.y, layer.width, layer.height);\n          context.restore();\n          break;\n\n        case \"html\":\n          context.save();\n          context.beginPath();\n          context.translate(options.padding, options.padding);\n          context.drawImage(layer.value, layer.x, layer.y, layer.width, layer.height);\n          context.restore();\n          break;\n\n        case \"text\":\n\n          const parent = select(layer.style);\n          const title = layer.value\n            .replace(/&/g, \"&amp;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n\n          const fC = parent.style(\"color\"),\n                fS = parent.style(\"font-size\");\n\n          let fF = parent.style(\"font-family\").split(\",\")[0];\n\n          if (fF.indexOf(\"'\") !== 0) fF = `'${fF}'`;\n          const text = `<text stroke='none' dy='${fS}' fill='${fC}' font-family=${fF} font-size='${fS}'>${title}</text>`;\n\n          context.save();\n          context.translate(options.padding, options.padding);\n          canvg(canvas, text, Object.assign({}, canvgOptions, {offsetX: layer.x, offsetY: layer.y}));\n          context.restore();\n\n          break;\n\n        case \"svg\":\n          const outer = IE ? (new XMLSerializer()).serializeToString(layer.value) : layer.value.outerHTML;\n          context.save();\n          context.translate(options.padding + clip.x, options.padding + clip.y);\n          context.rect(0, 0, clip.width, clip.height);\n          context.clip();\n          canvg(canvas, outer, Object.assign({}, canvgOptions, {offsetX: layer.x + clip.x, offsetY: layer.y + clip.y}));\n          context.restore();\n          break;\n\n        default:\n          console.warn(\"uncaught\", layer);\n          break;\n\n      }\n\n    }\n\n    options.callback(canvas);\n\n  }\n\n}\n","import \"canvas-toBlob\";\nimport {saveAs} from \"file-saver\";\n// import {default as JsPDF} from \"jspdf\";\n\nimport dom2canvas from \"./dom2canvas\";\n\nconst defaultOptions = {\n  filename: \"download\",\n  type: \"png\"\n};\n\n/**\n    @function saveElement\n    @desc Downloads an HTML Element as a bitmap PNG image.\n    @param {HTMLElement|Array} elem A single element or array of elements to be saved to one file.\n    @param {Object} [options] Additional options to specify.\n    @param {String} [options.filename = \"download\"] Filename for the downloaded file, without the extension.\n    @param {String} [options.type = \"png\"] File type of the saved document. Accepted values are `\"png\"` and `\"jpg\"`.\n    @param {Object} [renderOptions] Custom options to be passed to the dom2canvas function.\n*/\nexport default function(elem, options = {}, renderOptions = {}) {\n\n  if (!elem) return;\n  options = Object.assign({}, defaultOptions, options);\n  const IE = new RegExp(/(MSIE|Trident\\/|Edge\\/)/i).test(navigator.userAgent);\n\n  if (!(elem instanceof Array) && options.type === \"svg\") {\n    const outer = IE ? (new XMLSerializer()).serializeToString(elem) : elem.outerHTML;\n    saveAs(new Blob([outer], {type: \"application/svg+xml\"}), `${options.filename}.svg`);\n  }\n\n  dom2canvas(elem, Object.assign({}, renderOptions, {callback: canvas => {\n\n    if (renderOptions.callback) renderOptions.callback(canvas);\n\n    if ([\"jpg\", \"png\"].includes(options.type)) {\n      canvas.toBlob(blob => saveAs(blob, options.filename));\n    }\n    // else if (options.type === \"pdf\") {\n    //\n    //   const outputHeight = 11,\n    //         outputUnit = \"in\",\n    //         outputWidth = 8.5;\n    //\n    //   const aspect = canvas.width / canvas.height,\n    //         orientation = aspect > 1 ? \"landscape\" : \"portrait\";\n    //\n    //   const pdf = new JsPDF(orientation, outputUnit, [outputWidth, outputHeight]);\n    //\n    //   let h = orientation === \"landscape\" ? outputWidth : outputHeight,\n    //       left,\n    //       top,\n    //       w = orientation === \"landscape\" ? outputHeight : outputWidth;\n    //\n    //   const margin = 0.5;\n    //\n    //   if (aspect < w / h) {\n    //     h -= margin * 2;\n    //     const tempWidth = h * aspect;\n    //     top = margin;\n    //     left = (w - tempWidth) / 2;\n    //     w = tempWidth;\n    //   }\n    //   else {\n    //     w -= margin * 2;\n    //     const tempHeight = w / aspect;\n    //     left = margin;\n    //     top = (h - tempHeight) / 2;\n    //     h = tempHeight;\n    //   }\n    //\n    //   pdf.addImage(canvas, \"canvas\", left, top, w, h);\n    //   pdf.save(options.filename);\n    //\n    // }\n\n  }}));\n\n}\n"],"names":["const","select","let","tag","x","y","data","elem","scale","selectAll","options","defaultOptions","saveAs"],"mappings":"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"}